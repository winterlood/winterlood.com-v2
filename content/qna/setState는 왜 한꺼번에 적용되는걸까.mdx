---
id: 52738225-1a09-4798-b0cc-e81252763201
type: QNA
title: setStateë¥¼ ë‘ë²ˆ í˜¸ì¶œí–ˆëŠ”ë° í•˜ë‚˜ë§Œ ì ìš©ë©ë‹ˆë‹¤
date: 2023-11-13
subtitle: í•˜ë‚˜ì˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ setStateë¥¼ ë‘ë²ˆ í˜¸ì¶œí•  ë•Œ ì£¼ì˜í•  ì 
tags: 
 - í•œì… í¬ê¸°ë¡œ ì˜ë¼ë¨¹ëŠ” ë¦¬ì•¡íŠ¸
---


### ì§ˆë¬¸


ê°•ì‚¬ë‹˜ ì•ˆë…•í•˜ì„¸ìš”


ì•„ë˜ì˜ ì½”ë“œë¥¼ ë³´ê³  ì§ˆë¬¸ì„ ë°›ì•„ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.


```javascript
const Test = () => {
  const [testData, setTestData] = useState({
    testNumber1: 0,
    testNumber2: 0
  });

  useEffect(() => {
    axios.get("1ë²ˆ API").then((res) => {
      const responseData = res.data;
      setTestData({
        ...testData,
        testNumber1: responseData
      });
    });

    axios.get("2ë²ˆ API").then((res) => {
      const responseData = res.data;
      setTestData({
        ...testData,
        testNumber2: responseData
      });
    });
  }, []);

  return (
    <>{`${testData.testNumber1} / ${testData.testNumber2}`}</>
  );
};
```


testData.testNumber1 ì—ëŠ” ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ë°˜ì˜ë˜ëŠ”ë°


testData.testNumber2 ì—ëŠ” ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ë°˜ì˜ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.


<Blank/>


<Blank/>


### ë‹µë³€


ì•ˆë…•í•˜ì„¸ìš” ì´ì •í™˜ì…ë‹ˆë‹¤.


ìš°ì„  ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²°ê³¼ì ì¸ ì´ìœ ëŠ” ì²«ë²ˆì§¸ ë¹„ë™ê¸° í˜¸ì¶œì˜ then ë©”ì„œë“œì™€ ë‘ë²ˆì§¸ ë¹„ë™ê¸° í˜¸ì¶œì˜ then ë©”ì„œë“œê°€ í˜„ì¬ ê°™ì€ Stateê°’ì„ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.


ì´ ë¬¸ì œëŠ” êµ³ì´ ë¹„ë™ê¸° í˜¸ì¶œì´ ì•„ë‹ˆì—¬ë„ ë¹„ìŠ·í•˜ê²Œ ì¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë´ì£¼ì„¸ìš”


```javascript
export default function App() {
  const [state, setState] = useState({ a: 0, b: 0 });

  const onClick = () => {
    setState({
      ...state,
      a: state.a + 1
    });

    setState({
      ...state,
      b: state.b + 1
    });
  };

  return (
    <div className="App">
      <div>a : {state.a}</div>
      <div>b : {state.b}</div>
      <button onClick={onClick}>ì¦ê°€</button>
    </div>
  );
}

```


ìœ„ ì½”ë“œì˜ App ì»´í¬ë„ŒíŠ¸ëŠ” aì™€ bë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°€ì§„ ê°ì²´ í˜•íƒœì˜ Stateë¥¼ ê°€ì§‘ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì€ UIë¥¼ ë Œë”ë§ í•©ë‹ˆë‹¤.


![](https://cdn.inflearn.com/public/files/posts/af2136c7-20f2-4505-8752-8185773c5b19/image.png)


ì´ë•Œ "ì¦ê°€" ë²„íŠ¼ì„ í´ë¦­í•˜ê²Œ ë˜ë©´ onClick í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. 


ê·¸ëŸ¼ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?


ì•„ë§ˆë„ ëŒ€ë¶€ë¶„ aì™€ b ê°ê° 1ì”© ê°’ì´ ì¦ê°€í• ê±°ë¼ê³  ì˜ˆìƒí•˜ì‹¤ ê²ë‹ˆë‹¤. 


ì •ë§ ê·¸ëŸ´ê¹Œìš”? ì‹¤ì œë¡œ ì¦ê°€ ë²„íŠ¼ì„ í´ë¦­í•´ë³´ê² ìŠµë‹ˆë‹¤.


![](https://cdn.inflearn.com/public/files/posts/5ad4075b-5df6-462c-99a9-900460644f04/image.png)


ì¦ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì˜ˆìƒê³¼ëŠ” ë‹¤ë¥´ê²Œ aì˜ ê°’ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ê³  bì˜ ê°’ë§Œ 1 ëŠ˜ì–´ë‚©ë‹ˆë‹¤.


í•œë²ˆ ë” ëˆŒëŸ¬ë„ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ bì˜ ê°’ë§Œ ëŠ˜ì–´ë‚˜ê²Œ ë©ë‹ˆë‹¤. ì™œ ì´ë ‡ê²Œ ë˜ëŠ” ê±¸ê¹Œìš”?


![](https://cdn.inflearn.com/public/files/posts/6ef35db5-c5d3-484f-a71b-c57b298ba70f/image.png)


ê·¸ ì´ìœ ëŠ” ë™ì¼í•œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œëœ setStateì˜ ê²½ìš° ë™ì¼í•œ State ê°’ì„ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë” ì‰½ê²Œ ë§í•˜ìë©´ ì•„ë˜ì˜ ì½”ë“œì—ì„œ ìœ„ì˜ setStateì™€ ì•„ë˜ì˜ setState í•¨ìˆ˜ê°€ ì°¸ì¡°í•˜ëŠ” stateê°’ì´ ë™ì¼í•˜ë‹¤ëŠ” ê²ƒì´ì£ 


```javascript
  const onClick = () => {
    setState({
      ...state, // ê°’ : {a: 0, b: 0}
      a: state.a + 1
    });

    setState({
      ...state, // ê°’ : {a: 0, b: 0}
      b: state.b + 1
    });
  };
```


ê·¸ëŸ¬ë¯€ë¡œ setState ë©”ì„œë“œê°€ ì‘ì„±í•´ë‘” ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì–´ ë¨¼ì € aì˜ ê°’ì´ 1ë¡œ ì¦ê°€í–ˆë‹¤ê³  í•´ë„ ê²°êµ­ ë’¤ì— ì‹¤í–‰ë˜ëŠ” setStateì— ì˜í•´ aì˜ ê°’ì€ ë‹¤ì‹œ 0ìœ¼ë¡œ ë®ì´ê³  bì˜ ê°’ë§Œ 1ë¡œ ì¦ê°€í•˜ê²Œ ë©ë‹ˆë‹¤.


í˜¸ì¶œ ìˆœì„œë¥¼ ë°”ê¿”ì„œ í•´ë³´ë©´ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


```javascript
  const onClick = () => {
    setState({
      ...state,
      b: state.b + 1
    });

    setState({
      ...state,
      a: state.a + 1
    });
  };
```


ì´ë²ˆì—ëŠ” bì˜ ê°’ì„ 1 ì¦ê°€ì‹œí‚¤ëŠ” setStateë¥¼ ë¨¼ì € í˜¸ì¶œí•˜ë„ë¡ ìˆœì„œë¥¼ ë°”ê¿”ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ë•Œì˜ ê²°ê³¼ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”? ìŠ¬ìŠ¬ ëŠë‚Œì´ ì˜¤ì‹œë‚˜ìš”?


![](https://cdn.inflearn.com/public/files/posts/f4dd2640-2c8d-4d31-902b-e22c89ea2800/image.png)


ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ aì˜ ê°’ë§Œ 1 ì¦ê°€í•˜ê²Œ ë©ë‹ˆë‹¤.


ê·¸ëŸ¬ë¯€ë¡œ ìœ„ì™€ ê°™ì€ ê¸°ëŠ¥ì„ êµ¬í˜„ í•˜ë ¤ë©´ ê°€ì¥ ì‰¬ìš´ ë°©ë²•ìœ¼ë¡œëŠ” ë‹¤ìŒ ì½”ë“œì²˜ëŸ¼ setStateë¥¼ ìµœì†Œí™”í•˜ì—¬ í˜¸ì¶œí•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.


```javascript
  const onClick = () => {
    setState({
      a: state.a + 1,
      b: state.b + 1
    });
  };
```


ë§Œì•½ ì´ë ‡ê²Œ í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ë¼ë©´ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ ì‚¬ìš©í•˜ì‹œëŠ”ê²ƒë„ ê´œì°®ìŠµë‹ˆë‹¤. í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ëŠ” ì–¸ì œë‚˜ ìµœì‹ ì˜ State ê°’ë§Œì„ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— ì•ì„œ ì‚´í´ë³¸ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


```javascript
  const onClick = () => {
    setState((state) => ({ // state ê°’ : ìµœì‹ 
      ...state,
      a: state.a + 1
    }));

    setState((state) => ({ // state ê°’ : ìµœì‹ 
      ...state,
      b: state.b + 1
    }));
  };
```


ì´í•´ê°€ ë˜ì…¨ë‚˜ìš”?


ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì§ˆë¬¸ìë‹˜ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ í•´ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. (useEffect ì½”ë“œë§Œ ë¶™ì—¬ë„£ì„ê²Œìš”)


```javascript
  useEffect(() => {
    axios.get("...").then((res) => {
      const responseData = 8;
      setTestData((data) => ({
        ...data,
        testNumber1: responseData
      }));
    });

    axios.get("...").then((res) => {
      const responseData = 8;
      setTestData((data) => ({
        ...data,
        testNumber2: responseData
      }));
    });
  }, []);
```


ë˜ ë‘ë²ˆì˜ API í˜¸ì¶œì„ ë‹¤ìŒê³¼ ê°™ì´ Promise.all ë“±ì˜ Promise APIë¥¼ í™œìš©í•´ ë³‘ë ¬ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒë„ ì¢‹ì•„ë³´ì…ë‹ˆë‹¤. (ì´ê²Œ ë” ì¢‹ì€ê²ƒ ê°™ì•„ìš”)


```javascript
  useEffect(() => {
    Promise.all([axios.get("..."), axios.get("...")]).then(
      ([res1, res2]) => {
        const res1Data = res1.data;// 8 ì´ë¼ê³  ê°€ì •
				const res2Data = res2.data;// 8 ì´ë¼ê³  ê°€ì •

        setTestData({
          testNumber1: res1Data,
          testNumber2: res2Data
        });
      }
    );
  }, []);
```


<Blank/>


ì—¬ê¸°ì— ë§ë¶™ì—¬ React 18 ë²„ì „ë¶€í„°ëŠ” ë™ì‹œì— ë°œìƒí•œ setStateë¥¼ í•œë²ˆì— ëª¨ì•„ ìë™ìœ¼ë¡œ ë°˜ì˜í•˜ëŠ” Auto Batching ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°ìš” ì´ì— ëŒ€í•´ì„œë„ ì¶”ê°€ë¡œ ë” íƒêµ¬í•´ë³´ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ ğŸ˜ƒ


<Bookmark url={`https://react.dev/blog/2022/03/29/react-v18#new-feature-automatic-batching`} title={`React v18.0 â€“ React`} thumbnail={`https://react.dev/images/og-blog.png`} description={`The library for web and native user interfaces`}/>


<Blank/>

